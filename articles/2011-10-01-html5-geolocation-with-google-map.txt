--- 
title: HTML5 Geolocation with Google Map
tags: html5, geolocation, googlemap
date: 2011/10/01
description: Showing real-time location with Google Map and HTML5 geolocation API

Everyone is doing a geo app now day whether web-based or native. Putting following codes will give you a Google Map that use V3 aka latest version (at the time of writing) of Google Map API. Beside detecting user geolocation in modern browser including those of mobile (Android and iOS), the script will show several defined locations with animated markers and info window that can be extended with basic HTML and CSS. The script is written in a way to make it easier for web developer to loop the locations markers to show recent locations or places. 

In actual development, your application should be generating markers and info windows from GeoRSS, KML, Fusiontables, SimpleGeo or similar geo feeds/storage services. Follow [this link](http://goo.gl/7Z51c) for more information on loading map layers from feeds and geo storage services.

You can also fork or edit the code [here](https://gist.github.com/1254376)

	:::html
	<div id="map-big" style="width:500px; height:300px"></div>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript">
	    var locations = [
	      ["Tanglin", 1.29559, 103.825607, 3],
	      ["Orchard Turn", 1.30431, 103.831905, 2],
	      ["Cityhall", 1.29308, 103.852226, 1],
	      ];

	    if (navigator.geolocation) {
	        navigator.geolocation.getCurrentPosition(function(position) {
	            showMap(position.coords.latitude, position.coords.longitude);
	        });
	    }

	    else {

	    }

	    function showMap(geolat, geolng) {

	          var map = new google.maps.Map(document.getElementById('map-big'), {
	          zoom: 10,
	          center: new google.maps.LatLng(geolat, geolng),
	          mapTypeId: google.maps.MapTypeId.ROADMAP
	        });

	        var infowindow = new google.maps.InfoWindow({
	            maxWidth: 200
	        });

	        var marker, i;

	        for (i = 0; i &lt; locations.length; i++) {
	          marker = new google.maps.Marker({
	            animation: google.maps.Animation.DROP,
	            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
	            map: map
	          });

	          google.maps.event.addListener(marker, 'click', (function(marker, i) {
	            return function() {
	              infowindow.setContent(locations[i][0]);
	              infowindow.open(map, marker);
	            }
	          })(marker, i));
	        }
	    }
	</script>

